#!/bin/sh

source $HOME/.local/bin/dc-docker-cmd

print_err() {
  err=$1
  echo "Error: $1" >&2
  echo "Enter [dc-build-container --help] for help"
  exit 1
}

if [ -z "$CUSTOM_DOCKER_CONTAINERS_PATH" ]; then
  print_err "CUSTOM_DOCKER_CONTAINERS_PATH variable is not set"
fi

CONT_PATH="$CUSTOM_DOCKER_CONTAINERS_PATH"
container=$1

fullpath="$CONT_PATH/$container"

if ! [ -f "$fullpath/Dockerfile" ]; then
  print_err "container does not exist"
fi

docker_cmd buildx build --network=host -t "dc-$container" "$fullpath"
exit 0
