#!/usr/bin/env bash
set -e

source "$SCRIPTS_DIR/dc-docker/dc-docker-cmd"

require_vars CUSTOM_DOCKER_CONTAINERS_PATH

container=$1

fullpath="$CUSTOM_DOCKER_CONTAINERS_PATH/$container"

if ! [ -d "$fullpath" ]; then
  echo "Container does not exist" >&2
  exit 1
fi

if ! [ -f "$fullpath/Dockerfile" ]; then
  echo "Container does not exist" >&2
  exit 1
fi

docker_cmd buildx build --network=host -t "dc-$container" "$fullpath"
