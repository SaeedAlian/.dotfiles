#!/usr/bin/env bash
set -e

require_vars START_LOCKSCREEN_SCRIPT_PATH

DPMS_TIME=${DPMS_TIME:-600}

xset +dpms dpms 0 $DPMS_TIME $DPMS_TIME
pgrep -x xss-lock >/dev/null || xss-lock -l -- $START_LOCKSCREEN_SCRIPT_PATH &

if [ $? == 0 ]; then
  DISPLAY=:0.0 notify-send --expire-time=2000 "DPMS turned on"
fi
