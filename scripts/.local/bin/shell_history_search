#!/bin/sh

HISTORY_FILE="$HOME/.zsh_history"

count=$1

if [[ $count == "max" ]]; then
	selection=$(cat $HISTORY_FILE | sed 's/^[^;]*;//' | fzf -m)
elif [[ $count =~ ^[0-9]+$ ]]; then
	selection=$(tail -$count $HISTORY_FILE | sed 's/^[^;]*;//' | fzf -m)
else
	selection=$(tail -100 $HISTORY_FILE | sed 's/^[^;]*;//' | fzf -m)
fi

echo -n $selection | sed "s/\n//" | xclip -selection clipboard
